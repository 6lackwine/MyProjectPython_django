{% extends "shopapp/base.html" %}
{% load cache %}

{% block title %}
  User orders
{% endblock %}

{% block body %}
  <h1>Orders:</h1>
  {% if user.is_authenticated %}
      <div>
        {% for order in user_orders %}
          <p>Name: {{ owner.first_name }}</p>
          <p>Surname: {{ owner.last_name }}</p>
          <p>Email: {{ owner.email }}</p>
          {% cache 5 user_orders owner %}
            <p>Details â„–{{ order.pk }}</p>
            Product in order:
            {% for product in order.products.all %}
              <ul>
                  {{ product.name }} for ${{ product.price }}
              </ul>
            {% endfor %}
          {% endcache %}
        {% empty %}
          <h3>The user {{ owner.username }} has no orders</h3>
        {% endfor %}
      </div>

  {% endif %}
{% endblock %}